@let data = rawFiles$ | async; @if (data) {
  <div class="post-container animate-fade-in">
    <mat-card appearance="outlined" class="post-card">
      <mat-card-header>
        <mat-card-title>
          @if (data.url) {
            <a [href]="data.url" target="_blank" rel="noopener noreferrer" class="title-link">
              {{ data.title }}
              <span class="domain">({{ data.url | slice:0:30 }}...)</span>
            </a>
          } @else {
            <span class="title-text">{{ data.title }}</span>
          }
        </mat-card-title>
        <mat-card-subtitle>
          <div class="meta-row">
            <span class="score">{{ data.score }} points</span>
            <span class="by">by {{ data.by }}</span>
            <span class="time">{{ data.time | relativeTime }}</span>
          </div>
        </mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        @if (data.text) {
          <div class="post-text" [innerHTML]="data.text"></div>
        }
      </mat-card-content>
      
      <mat-card-actions>
        <a [href]="'https://news.ycombinator.com/item?id=' + data.id" target="_blank" mat-button>
          View on HN
        </a>
      </mat-card-actions>
    </mat-card>

    <div class="comments-section">
      <h3>{{ data.descendants || 0 }} Comments</h3>
      @if (data.kids && data.kids.length) {
        <div class="comments-list">
          @for (kidId of data.kids; track kidId) {
            <app-comment [commentId]="kidId"></app-comment>
          }
        </div>
      } @else {
        <div class="no-comments">No comments yet.</div>
      }
    </div>
  </div>
}
